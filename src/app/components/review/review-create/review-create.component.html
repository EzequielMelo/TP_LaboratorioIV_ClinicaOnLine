<!--Modal donde creo la review-->
<div
  class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"
>
  <div
    class="bg-white p-6 rounded-lg shadow-lg w-1/3 max-h-[90vh] overflow-auto"
  >
    <h3 class="text-2xl font-semibold mb-6 text-center">Crear reseña</h3>

    <div class="mb-6">
      <label for="review" class="block text-lg font-medium mb-2">Reseña</label>
      <textarea
        id="review"
        [(ngModel)]="reviewText"
        placeholder="Escribe la reseña sobre la atención del especialista..."
        class="w-full border border-gray-300 rounded p-3 text-gray-800 resize-none"
        rows="6"
      ></textarea>
    </div>

    <!-- Captcha: se renderiza *solo* si captchaEnabled es true -->
    <div *ngIf="captchaEnabled" class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-2"
        >Verificación Captcha</label
      >

      <input
        id="captcha"
        type="text"
        placeholder="Ingrese el código"
        appCaptcha
        (captchaResolved)="onCaptchaResult($event)"
        class="w-full pl-3 pr-4 py-2 text-sm border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-all duration-200 shadow-sm"
      />

      <p *ngIf="!captchaOk && captchaTouched" class="text-sm text-red-600 mt-1">
        El captcha no es correcto
      </p>
    </div>

    <!-- Si el captcha está desactivado por configuración, podés mostrar un pequeño aviso opcional -->
    <p *ngIf="!captchaEnabled" class="text-sm text-gray-500 mb-4">
      Captcha deshabilitado en tu configuración — no es necesario verificar.
    </p>

    <div class="flex justify-center gap-4">
      <button
        (click)="saveReview()"
        [disabled]="!captchaOk"
        class="px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Guardar
      </button>
      <button
        (click)="closeModal()"
        class="px-6 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition"
      >
        Cancelar
      </button>
    </div>
  </div>
</div>
