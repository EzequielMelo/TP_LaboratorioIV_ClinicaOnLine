<div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8">
  <h1 class="text-center text-3xl font-bold text-gray-800 mb-6">
    Solicitar nuevo turno
  </h1>
  <p class="text-center text-gray-500 mb-8">
    Complete los campos para agendar su cita médica
  </p>

  <form
    class="space-y-6"
    [formGroup]="newAppointmentForm"
    (ngSubmit)="onSubmit()"
  >
    <!-- Especialidad -->
    <div>
      <label
        for="specialty"
        class="block text-sm font-semibold text-gray-700 mb-2"
        >Especialidad</label
      >
      <select
        formControlName="specialty"
        id="specialty"
        class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3 transition"
      >
        <option value="" selected disabled>Selecciona una especialidad</option>
        @for (specialty of specialtys; track $index) {
        <option value="{{ specialty }}">{{ specialty }}</option>
        }
      </select>
      @if (newAppointmentForm.controls['specialty'].invalid &&
      newAppointmentForm.controls['specialty'].touched) {
      <p class="text-xs text-red-600 mt-1">
        Por favor seleccione una especialidad
      </p>
      }
    </div>

    <!-- Profesional -->
    <div>
      <label
        for="specialistName"
        class="block text-sm font-semibold text-gray-700 mb-2"
        >Profesional</label
      >
      <select
        formControlName="specialistName"
        id="specialistName"
        (change)="onSpecialistChange($event)"
        class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3 transition"
      >
        <option value="" selected disabled>Selecciona al profesional</option>
        @for (specialist of specialists; track $index) {
        <option class="text-black" value="{{ specialist.id }}">
          {{ specialist.name }} {{ specialist.lastName }}
        </option>
        }
      </select>
      @if (newAppointmentForm.controls['specialistName'].invalid &&
      newAppointmentForm.controls['specialistName'].touched) {
      <p class="text-xs text-red-600 mt-1">
        Por favor seleccione un especialista
      </p>
      }
    </div>

    <!-- Día disponible -->
    <div>
      <label
        for="availableDays"
        class="block text-sm font-semibold text-gray-700 mb-2"
        >Día disponible</label
      >
      <select
        id="availableDays"
        formControlName="selectedDay"
        (change)="onDayChange($event)"
        class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3 transition"
      >
        <option value="" selected disabled>Seleccione un día</option>
        @for (day of schedule; track $index) {
        <option [value]="$index">
          {{ day.date.toString() | date : "fullDate" }}
        </option>
        }
      </select>
      @if (newAppointmentForm.controls['selectedDay'].invalid &&
      newAppointmentForm.controls['selectedDay'].touched) {
      <p class="text-xs text-red-600 mt-1">Por favor seleccione un día</p>
      }
    </div>

    <!-- Horario -->
    <div>
      <label
        for="selectedSlot"
        class="block text-sm font-semibold text-gray-700 mb-2"
        >Horario</label
      >
      <select
        id="selectedSlot"
        formControlName="selectedSlot"
        class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3 transition"
      >
        <option value="" selected disabled>Seleccione un horario</option>
        @for (slot of selectedDaySlots; track $index) {
        <option [value]="$index">{{ slot }}</option>
        }
      </select>
      @if (newAppointmentForm.controls['selectedSlot'].invalid &&
      newAppointmentForm.controls['selectedSlot'].touched) {
      <p class="text-xs text-red-600 mt-1">Por favor seleccione un horario</p>
      }
    </div>

    <!-- Botón -->
    <div class="pt-4">
      <button
        type="submit"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg shadow-md transition"
      >
        Solicitar turno
      </button>
    </div>
  </form>
</div>
