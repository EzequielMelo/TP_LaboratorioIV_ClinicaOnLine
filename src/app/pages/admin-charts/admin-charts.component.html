<div class="admin-dashboard">
  <!-- Header del Dashboard -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="title-section">
        <h1>üè• Panel Administrativo - Cl√≠nica</h1>
        <p class="subtitle">Sistema de an√°lisis y estad√≠sticas</p>
      </div>

      <div class="header-actions">
        <div class="last-update">
          <span
            >√öltima actualizaci√≥n:
            {{ getUltimaActualizacionFormateada() }}</span
          >
        </div>

        <button
          class="btn btn-refresh"
          (click)="refrescarDatos()"
          [disabled]="cargando"
        >
          <span *ngIf="!cargando">üîÑ</span>
          <span *ngIf="cargando" class="spinner">‚è≥</span>
          {{ cargando ? "Cargando..." : "Actualizar" }}
        </button>

        <button
          class="btn btn-export"
          (click)="exportarDatos()"
          [disabled]="cargando"
        >
          üìä Exportar
        </button>
      </div>
    </div>
  </header>

  <div class="dashboard-body">
    <!-- Men√∫ lateral de navegaci√≥n -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h3>üìã Estad√≠sticas</h3>
      </div>

      <nav class="sidebar-nav">
        <ul class="nav-list">
          <li
            *ngFor="let opcion of opcionesGraficos"
            class="nav-item"
            [class.active]="opcion.activo"
          >
            <button
              class="nav-button"
              (click)="seleccionarGrafico(opcion.id)"
              [class.active]="opcion.activo"
            >
              <div class="nav-icon">{{ opcion.icono }}</div>
              <div class="nav-content">
                <div class="nav-title">{{ opcion.titulo }}</div>
                <div class="nav-description">{{ opcion.descripcion }}</div>
              </div>
            </button>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- √Årea principal de contenido -->
    <main class="main-content">
      <!-- Header del gr√°fico actual -->
      <div class="content-header">
        <div class="content-title">
          <h2>{{ getTituloGraficoActual() }}</h2>
          <p class="content-description">{{ getDescripcionGraficoActual() }}</p>
        </div>
      </div>

      <!-- √Årea de gr√°ficos din√°micos -->
      <div class="chart-container">
        <!-- Estado de carga -->
        <div *ngIf="cargando" class="loading-state">
          <div class="loading-spinner">‚è≥</div>
          <p>Cargando estad√≠sticas...</p>
        </div>

        <!-- Estado de error -->
        <div *ngIf="error && !cargando" class="error-state">
          <div class="error-icon">‚ùå</div>
          <p>{{ error }}</p>
          <button class="btn btn-retry" (click)="refrescarDatos()">
            üîÑ Reintentar
          </button>
        </div>

        <!-- Componentes hijos seg√∫n la selecci√≥n -->
        <div *ngIf="!cargando && !error" class="chart-content">
          <!-- Resumen General -->
          <app-logged-users *ngIf="graficoActual === TipoGrafico.LOGINS">
          </app-logged-users>

          <!-- Logins por Tipo de Usuario -->
          <app-appointments-requested-by-time
            *ngIf="graficoActual === TipoGrafico.TURNOS_POR_ESPECIALIDAD"
          >
          </app-appointments-requested-by-time>

          <!-- Actividad Diaria -->
          <app-appointments-completed-by-time
            *ngIf="graficoActual === TipoGrafico.TURNOS_POR_DIA"
          >
          </app-appointments-completed-by-time>

          <!-- Actividad Semanal -->
          <app-appointments-per-day
            *ngIf="graficoActual === TipoGrafico.TURNOS_SOLICITADOS"
          >
          </app-appointments-per-day>

          <!-- Usuarios M√°s Activos -->
          <app-appointments-per-specialty
            *ngIf="graficoActual === TipoGrafico.TURNOS_FINALIZADOS"
          >
          </app-appointments-per-specialty>
        </div>
      </div>
    </main>
  </div>
</div>
